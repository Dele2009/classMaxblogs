
<!DOCTYPE html>
<html lang="en">
    <%- include ('../main_app_head') %>


<body id="">
      <%- include ('../main_app_header') %>
      <%-include('../Alertbox')%>

    <!-- Page Wrapper -->
    <div id="wrapper">

        <!-- Sidebar -->
        <%- include ('../sidebar')%>
        <!-- End of Sidebar -->

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="" class="" >
                <div class="bg-white py-2 collapse-inner rounded">
                    <p>Select User:</p>
                    <div class="input-group my-3">
                        
                        <select class="form-select py-3" id="user-dropdown">
                            <option selected>Choose...</option>
                            <% users.forEach(user=> { %>
                                <option value="<%= user._id %>">
                                    <%= user.name %>
                                </option>
                                <% }) %>
                        </select>
                        <button class="btn btn-primary" type="button" id="start-chat-btn" >Chat</button>
                        <script>
         
                            const startChatBtn = document.getElementById('start-chat-btn');
                            const userId = "<%=User._id%>"
                            startChatBtn.addEventListener('click', () => {
                                const userDropdown = document.getElementById('user-dropdown');
                                const receiverId = userDropdown.value;
                                if (receiverId !== userId) {
                                    window.location.href = `/chats/${receiverId}`;
                                } else {
                                    alert('Cannot select yourself for chat.');
                                }
                            });
                        </script>
                    </div>
                </div>
            </div>

            <!-- End of Main Content -->
            <%- include ('./modal')%>
            <!-- Footer -->
            <%- include ('./footer')%>

            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->
   
    

   
   <%- include ('../scripts')%>

  

</body>

</html>
